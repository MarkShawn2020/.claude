---
allowed-tools: Read(*), Edit(*), Glob(*), Grep(*)
description: 通过策略性添加日志来调试难以解决的功能问题
version: "1.0.0"
author: "公众号：手工川"
---

# Fix by Add Log

通过策略性地添加日志语句来调试问题。

## 输入

用户会描述：
1. 遇到的问题现象
2. 相关的文件或功能模块（可选）

## 执行流程

### 1. 理解问题

分析用户描述的问题，确定：
- 问题发生在哪个环节（数据流入、处理、输出）
- 可能涉及的代码路径

### 2. 定位关键位置

在以下位置添加日志：
- 函数入口：记录参数
- 条件分支：记录走向
- 异步操作：记录前后状态
- 数据变换：记录变换前后的值
- 错误边界：记录异常信息

### 3. 日志格式规范

根据项目语言选择合适的日志方式：

**JavaScript/TypeScript:**
```javascript
console.log('[DEBUG][模块名] 描述:', 变量);
console.log('[DEBUG][模块名] 函数名 入口:', { 参数1, 参数2 });
console.log('[DEBUG][模块名] 条件判断结果:', 条件表达式);
```

**Python:**
```python
print(f"[DEBUG][模块名] 描述: {变量}")
```

**Go:**
```go
log.Printf("[DEBUG][模块名] 描述: %v", 变量)
```

### 4. 添加策略

按优先级添加日志：
1. **入口日志** - 函数被调用时的参数
2. **关键节点日志** - 重要的状态变化点
3. **出口日志** - 函数返回值或最终状态
4. **条件日志** - if/switch 的判断结果

### 5. 输出

添加日志后，告知用户：
- 添加了哪些日志
- 在哪些文件的哪些位置
- 请用户触发问题场景并提供日志输出

## 注意事项

- 日志要有明确的标识前缀 `[DEBUG]`，便于后续清理
- 不要在循环内部添加大量日志（除非必要）
- 敏感信息不要记录（密码、token等）
- 问题解决后提醒用户可以清理这些调试日志

## 示例对话

用户: 点击按钮后数据没有更新到页面上
助手:
1. 在按钮点击处理函数入口添加日志
2. 在数据请求前后添加日志
3. 在状态更新处添加日志
4. 在渲染逻辑处添加日志

请触发问题并提供控制台输出。
